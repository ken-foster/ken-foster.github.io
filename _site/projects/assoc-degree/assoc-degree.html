<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Home | A portfolio website for Kenneth Foster</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Home" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A portfolio website for Kenneth Foster" />
<meta property="og:description" content="A portfolio website for Kenneth Foster" />
<link rel="canonical" href="http://localhost:4000/projects/assoc-degree/assoc-degree.html" />
<meta property="og:url" content="http://localhost:4000/projects/assoc-degree/assoc-degree.html" />
<meta property="og:site_name" content="Home" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Home" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"A portfolio website for Kenneth Foster","headline":"Home","url":"http://localhost:4000/projects/assoc-degree/assoc-degree.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Home" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Home</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <p><em>The following is adapted from a course project for ECON 424 - Income Inequality, at UCLA’s Master of Quantitative Economics Program. Done in collaboration with 2 fellow students.</em></p>

<h1 id="the-decreasing-relative-value-of-an-associates-degree">The Decreasing Relative Value of An Associate’s Degree</h1>
<p>Americans have a wide variety of choices to make concerning their career and education once they complete K-12. One avenue, the Associate’s degree, has not been examined as often as higher degrees or abstaining from college altogether. While only a small minority choose the route of only an Associate’s, or 2-year, degree, it is important to understand the wage premiums associated with it, so young persons can be better informed about their choices.</p>

<p>Using a sample of U.S. Census data, we examine descriptive statistics on income for 4 levels of educational attainment and apply regression methods to parse out the value of a secondary education relative to only receiving a High School Diploma/GED, with a focus on the unique position of holding an Associate’s degree. We find that while other degrees have generally increased in value relative to only finishing High School, the relative value of an Associate’s degree has decreased over time, particularly after the Great Financial Crisis in 2009.</p>

<h1 id="import-libraries">Import Libraries</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Standard Library
</span><span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="n">dt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

<span class="c1"># Third-party
## Misc
</span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">pandas_datareader.data</span> <span class="k">as</span> <span class="n">web</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="c1">## Statistics
</span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="n">sm</span>

<span class="c1">## Plotting/Tables
</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">from</span> <span class="nn">stargazer.stargazer</span> <span class="kn">import</span> <span class="n">Stargazer</span><span class="p">,</span> <span class="n">LineLocation</span>

</code></pre></div></div>

<h1 id="load-and-customize-ipums-data">Load and customize IPUMS data</h1>
<p>This project uses a sample from the U.S. Census Bureau 2000-2019 American Community Survey 5-year estimates, retrieved from  <a href="https://usa.ipums.org/usa/">IPUMS USA</a>. This sample represents 0.1\% of the full survey. For readability, the full data exploration is not included in this workbook.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Read in IPUMS extract file
</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s">'usa_00005.dta/usa_00005.dta'</span><span class="p">,</span> <span class="n">convert_categoricals</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="create-bins-for-highest-level-of-education">Create bins for highest level of education</h2>
<p>In the original data, there are many survey responses for a person’s highest level of education completed. In this cell, we coelesce them into 5 categories:</p>
<ul>
  <li>Did not finish K-12</li>
  <li>Finished High school (Diploma or GED)</li>
  <li>Finished a 2-year (Associates) college degree</li>
  <li>Finished a 4-year (Bachelor’s) college degree</li>
  <li>Finished a graduate (Master’s, PhD, etc) college degree</li>
</ul>

<p>Going forward, all references to education specifically mean highest level of education.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create bins aggregating related education levels
</span><span class="n">df</span><span class="p">[</span><span class="s">"educbin"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"educd"</span><span class="p">],</span> 
                       <span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>   <span class="c1"># Missing
</span>                               <span class="mi">61</span><span class="p">,</span>   <span class="c1"># Didn't Finish K-12
</span>                               <span class="mi">80</span><span class="p">,</span>   <span class="c1"># Finished HS/College Dropout
</span>                               <span class="mi">83</span><span class="p">,</span>   <span class="c1"># Associate's Degree
</span>                               <span class="mi">100</span><span class="p">,</span>  <span class="c1"># Finished HS/College Dropout
</span>                               <span class="mi">101</span><span class="p">,</span>  <span class="c1"># Bachelor's Degree
</span>                               <span class="mi">113</span><span class="p">,</span>  <span class="c1"># Finished HS/College Dropout
</span>                               <span class="mi">116</span><span class="p">,</span>  <span class="c1"># Masters Degree
</span>                               <span class="mi">999</span><span class="p">],</span>  <span class="c1"># Missing 
</span>                       <span class="n">labels</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span> 

<span class="c1"># Create a DataFrame for educational bins in string format
</span><span class="n">educ_nums</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">educ_str</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">,</span> <span class="s">"K-12 Dropout"</span><span class="p">,</span> <span class="s">"HS Diploma/GED"</span><span class="p">,</span> <span class="s">"Associate's"</span><span class="p">,</span>
            <span class="s">"HS Diploma/GED"</span><span class="p">,</span> <span class="s">"Bachelor's"</span><span class="p">,</span><span class="s">"HS Diploma/GED"</span><span class="p">,</span>
            <span class="s">"Advanced"</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">]</span>
<span class="n">educ_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">'educbin'</span><span class="p">:</span><span class="n">educ_nums</span><span class="p">,</span> <span class="s">'educstr'</span><span class="p">:</span><span class="n">educ_str</span><span class="p">})</span>

<span class="c1"># Concatenate education strings to main dataframe
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">educ_df</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s">'left'</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s">'educbin'</span><span class="p">)</span>

<span class="c1"># Remove observations with less than high school diploma
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'educbin'</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div></div>

<h2 id="adjust-income-for-inflation">Adjust income for inflation</h2>
<p>As previously mentioned, the data ranges from the year 2000 to 2019. Using the Consumer Price Index from the Federal Reserve Economic Data (FRED) API, we adjust wages to 2019 dollars.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Retrieve CPI from FRED
</span><span class="n">cpi</span> <span class="o">=</span> <span class="n">web</span><span class="p">.</span><span class="n">DataReader</span><span class="p">(</span><span class="s">"CPIAUCNS"</span><span class="p">,</span> <span class="s">"fred"</span><span class="p">,</span> 
                     <span class="n">dt</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
                     <span class="n">dt</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">31</span><span class="p">))</span>

<span class="c1"># Extract annual CPI (Averaged over monthly data)
</span><span class="n">cpi</span><span class="p">[</span><span class="s">'year'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cpi</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="n">year</span>
<span class="n">annual_cpi</span> <span class="o">=</span> <span class="n">cpi</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'year'</span><span class="p">],</span> <span class="n">as_index</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)[[</span><span class="s">'CPIAUCNS'</span><span class="p">]].</span><span class="n">mean</span><span class="p">()</span>
<span class="n">cpi2019</span> <span class="o">=</span> <span class="n">annual_cpi</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Create CPI-adjusted income variable
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">annual_cpi</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s">'left'</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'adj_incwage'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cpi2019</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s">'incwage'</span><span class="p">]</span><span class="o">/</span><span class="n">df</span><span class="p">[</span><span class="s">'CPIAUCNS'</span><span class="p">]</span>

<span class="c1"># Preview 5 examples of original and adjusted wages
</span><span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s">'year'</span><span class="p">,</span><span class="s">'CPIAUCNS'</span><span class="p">,</span><span class="s">'incwage'</span><span class="p">,</span><span class="s">'adj_incwage'</span><span class="p">]].</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="n">head</span><span class="p">())</span>

</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>CPIAUCNS</th>
      <th>incwage</th>
      <th>adj_incwage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>752123</th>
      <td>2003</td>
      <td>183.958333</td>
      <td>36000</td>
      <td>50031.258890</td>
    </tr>
    <tr>
      <th>2999417</th>
      <td>2014</td>
      <td>236.736167</td>
      <td>5200</td>
      <td>5615.612457</td>
    </tr>
    <tr>
      <th>224199</th>
      <td>2001</td>
      <td>177.066667</td>
      <td>23000</td>
      <td>33208.512331</td>
    </tr>
    <tr>
      <th>3263661</th>
      <td>2015</td>
      <td>237.017000</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2934496</th>
      <td>2014</td>
      <td>236.736167</td>
      <td>62000</td>
      <td>66955.379301</td>
    </tr>
  </tbody>
</table>
</div>

<h1 id="summary-statistics--plots">Summary Statistics &amp; Plots</h1>

<h2 id="income-quartiles-by-education-level">Income quartiles by education level</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot with Seaborn Boxplot
</span><span class="n">sns</span><span class="p">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="s">'adj_incwage'</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s">'educstr'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span>
            <span class="n">showfliers</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Annual Wage ($)"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Income quartiles by education level"</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_10_0.png" alt="png" /></p>

<p>The median person with a Bachelor’s or Advanced degree earns more than those with only an Associate’s or High School Diploma/GED. Those with advanced degrees have the most heterogeneity in wages, with the 75th percentile making about \$100,000 and the 25th making \$25,000. Having no income at all is most commonly associated with High School completion only.</p>

<h2 id="ratio-of-persons-by-education-level">Ratio of Persons by Education Level</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create Grouped DataFrame, by year and education level
</span><span class="n">df_grouped</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'year'</span><span class="p">,</span><span class="s">'educstr'</span><span class="p">],</span> <span class="n">as_index</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>

<span class="c1"># Get number of people by year/level of education
</span><span class="n">grouped_yreduc_count</span> <span class="o">=</span> <span class="n">df_grouped</span><span class="p">.</span><span class="n">size</span><span class="p">()</span>

<span class="c1"># Get full count of persons by year
</span><span class="n">grouped_year_count</span> <span class="o">=</span> <span class="n">grouped_yreduc_count</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'year'</span><span class="p">],</span> 
                                                  <span class="n">as_index</span> <span class="o">=</span> <span class="bp">False</span><span class="p">).</span><span class="nb">sum</span><span class="p">()</span>

<span class="c1"># Per year, calculate ratio of persons in each education level
</span><span class="n">grouped_yreduc_ratio</span> <span class="o">=</span> <span class="n">grouped_yreduc_count</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">grouped_year_count</span><span class="p">,</span> 
                               <span class="n">how</span> <span class="o">=</span> <span class="s">'left'</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">)</span>
<span class="n">grouped_yreduc_ratio</span><span class="p">[</span><span class="s">'ratio'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">divide</span><span class="p">(</span><span class="n">grouped_yreduc_ratio</span><span class="p">[</span><span class="s">'size_x'</span><span class="p">],</span>
                                          <span class="n">grouped_yreduc_ratio</span><span class="p">[</span><span class="s">'size_y'</span><span class="p">])</span>

<span class="c1"># Drop unneeded numerator/denominator
</span><span class="n">grouped_yreduc_ratio</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'size_x'</span><span class="p">,</span><span class="s">'size_y'</span><span class="p">],</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="c1"># Pivot, creating columns for each education level
</span><span class="n">ed</span> <span class="o">=</span> <span class="n">grouped_yreduc_ratio</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">ed</span> <span class="o">=</span> <span class="n">ed</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">'educstr'</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="s">'ratio'</span><span class="p">)</span>

<span class="c1"># Create Plot
</span><span class="n">ed</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span> <span class="o">=</span> <span class="s">'bar'</span><span class="p">,</span> <span class="n">stacked</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Level of Education Ratio by Year"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Ratio"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="s">'lower center'</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mf">0.4</span><span class="p">),</span> <span class="n">ncol</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_13_0.png" alt="png" /></p>

<p>The share of people with any degree beyond High School completion has risen since 2000, but only slightly. This includes the share of people with an Associate’s degree.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># From previous info on number of people per year/education,
# Create subset comparing only people with an Associate's or
# Bachelor's
</span><span class="n">as_ba</span> <span class="o">=</span> <span class="n">grouped_yreduc_count</span><span class="p">[</span>
    <span class="n">np</span><span class="p">.</span><span class="n">isin</span><span class="p">(</span><span class="n">grouped_yreduc_count</span><span class="p">.</span><span class="n">educstr</span><span class="p">,</span> <span class="p">[</span><span class="s">"Associate's"</span><span class="p">,</span><span class="s">"Bachelor's"</span><span class="p">])]</span>

<span class="c1"># Repeat previous steps, getting full count of persons per year,
# calculating ratio, and pivoting to create education columns.
</span><span class="n">as_ba_count</span> <span class="o">=</span> <span class="n">as_ba</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'year'</span><span class="p">],</span> <span class="n">as_index</span> <span class="o">=</span> <span class="bp">False</span><span class="p">).</span><span class="nb">sum</span><span class="p">()</span>
<span class="n">as_ba_ratio</span> <span class="o">=</span> <span class="n">as_ba</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">as_ba_count</span><span class="p">,</span> 
                               <span class="n">how</span> <span class="o">=</span> <span class="s">'left'</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">)</span>
<span class="n">as_ba_ratio</span><span class="p">[</span><span class="s">'ratio'</span><span class="p">]</span> <span class="o">=</span> <span class="n">as_ba_ratio</span><span class="p">[</span><span class="s">'size_x'</span><span class="p">]</span><span class="o">/</span><span class="n">as_ba_ratio</span><span class="p">[</span><span class="s">'size_y'</span><span class="p">]</span>
<span class="n">as_ba_ratio</span><span class="p">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'size_x'</span><span class="p">,</span><span class="s">'size_y'</span><span class="p">],</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="n">as_ba_ed</span> <span class="o">=</span> <span class="n">as_ba_ratio</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">as_ba_ed</span> <span class="o">=</span> <span class="n">as_ba_ed</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">'educstr'</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="s">'ratio'</span><span class="p">)</span>

<span class="c1"># Plot
</span><span class="n">as_ba_ed</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span> <span class="o">=</span> <span class="s">'bar'</span><span class="p">,</span> <span class="n">stacked</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Level of Education Ratio by Year</span><span class="se">\n</span><span class="s">Assocate's vs Bachelor's"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Ratio"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="s">'lower center'</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">ncol</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'y'</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">'black'</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_15_0.png" alt="png" /></p>

<p>Both Bachelor’s and Associate’s Degrees have both become more popular over time compared to no college degree at all. Comparing only these two degrees, however, the ratio has remained the same over the years. Persons with a Bachelor’s Degree outnumber persons with an Associate’s Degreee about 3 to 1.</p>
<h2 id="difference-in-median-wages-over-time">Difference in Median Wages over time</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### Using previous grouped Datarame, get 
# median wages by year and education level
</span><span class="n">grouped_med_wages</span> <span class="o">=</span> <span class="n">df_grouped</span><span class="p">[[</span><span class="s">'adj_incwage'</span><span class="p">]].</span><span class="n">median</span><span class="p">()</span>

<span class="c1"># Pivot median wages, creating a column for each education level
</span><span class="n">grouped_med_wages</span> <span class="o">=</span> <span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="s">'year'</span><span class="p">,</span> 
                                            <span class="n">columns</span> <span class="o">=</span> <span class="s">'educstr'</span><span class="p">,</span> 
                                            <span class="n">values</span> <span class="o">=</span> <span class="s">'adj_incwage'</span><span class="p">)</span>

<span class="c1"># Calculate differences between Associates degree and Bachelor's degree or HS diploma
</span><span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-Bach'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">"Associate's"</span><span class="p">],</span>
                                              <span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">"Bachelor's"</span><span class="p">])</span>
<span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-HS/GED'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">"Associate's"</span><span class="p">],</span>
                                                <span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'HS Diploma/GED'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define function for adding a shaded bar to 
# a matplotlib time series plot to illustrate
# the 2007-2009 Recession
</span><span class="k">def</span> <span class="nf">recession</span><span class="p">(</span><span class="n">plt</span><span class="p">):</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">axvspan</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span><span class="mi">2010</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">"grey"</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot Median wage difference over time 
# between Associate's and Bachelor's Degrees
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-Bach'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-Bach'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Difference in Median Annual Wage between Associate's and Bachelor's"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference in Wage ($)"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">"Year"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
<span class="n">recession</span><span class="p">(</span><span class="n">plt</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_19_0.png" alt="png" /></p>

<p>The wage difference for people with an Associate’s degree as their highest degree compared to those with a Bachelor’s degree has become more pronounced over time. In 2000, the representative person with an Associate’s Degree made \$10,000 less per year than a person with a Bachelor’s. This figure increases to \$15,000 in 2019. As a reminder, income has been adjusted for inflation.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot difference over time between Associate's Degree and High School Diploma
</span><span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-HS/GED'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">grouped_med_wages</span><span class="p">[</span><span class="s">'Assoc-HS/GED'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Difference in Median Annual Wage between Associate's and High School"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Difference in Wage ($)"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">"Year"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
<span class="n">recession</span><span class="p">(</span><span class="n">plt</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_21_0.png" alt="png" /></p>

<p>The wage premium for people with an Associate’s degree versus a High School Diploma/GED grew until 2008, where it stagnated, then declined after 2016. In 2000, the median annual wage for a person with an Associate’s degree was \$12,500 higher than that of someone who only completed High School. This rose to \$16,000 by 2009, but has not increased since, and in fact declined to \$13,000 by 2019.</p>

<h2 id="year-over-year-changes-in-median-income">Year-Over-Year Changes in Median Income</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="n">mtick</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">educ</span> <span class="ow">in</span> <span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]:</span>
    
    <span class="n">ax</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">,</span>
                <span class="n">grouped_med_wages</span><span class="p">[</span><span class="n">educ</span><span class="p">].</span><span class="n">pct_change</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">,</span>
             <span class="n">grouped_med_wages</span><span class="p">[</span><span class="n">educ</span><span class="p">].</span><span class="n">pct_change</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="n">educ</span><span class="p">)</span>
    
<span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="p">.</span><span class="n">PercentFormatter</span><span class="p">())</span>

<span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">grouped_med_wages</span><span class="p">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'lower right'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Annual Income Changes"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">"Year"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Change in Median Income"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">"black"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">"dashed"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">recession</span><span class="p">(</span><span class="n">plt</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_24_0.png" alt="png" /></p>

<p>During the Great Financial Crisis, the lower the level of education, the more wages declined. The median wage associated with an advanced degree remained generally the same, while lower levels of education sharply decreasd. Wages for Associate’s degrees did not see an increase until 2013.</p>
<h1 id="prepare-data-for-regressions">Prepare Data for Regressions</h1>
<p>There are 3 classes of predictive variables used:</p>
<ol>
  <li>Indicators for level of education: Associate’s, Bachelor’s, or Advanced. High School only is the base value.</li>
  <li>Personal Controls: Race indicators, age, and an indicator if the person is female.</li>
  <li>Structural Controls: Indicators for employment and citizenship status.</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get outcome variable: Log Wages
# Log(0) is undefined, replace with log(1) = 0
</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">log</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s">"adj_incwage"</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> 
<span class="p">)</span>

<span class="c1"># Rename column for better display in stargazer table
</span><span class="n">y</span><span class="p">.</span><span class="n">rename</span><span class="p">(</span><span class="s">"Log Annual Wage"</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Create dummy variables for factor of interest: Level of Education
</span><span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s">"educstr"</span><span class="p">]</span>
<span class="p">).</span><span class="n">drop</span><span class="p">(</span><span class="s">"HS Diploma/GED"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># HS Diploma/GED is base value
</span>
<span class="c1"># Current format is 1 for Male, 2 for Female.
# Subtract 1 to create indicator variable: 1/True = Female
</span><span class="n">df</span><span class="p">[</span><span class="s">"fem"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">"sex"</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> 

<span class="c1"># Separate "Personal" control variables
# and generate dummies for race/ethnicity
</span><span class="n">control_columns1</span> <span class="o">=</span> <span class="p">[</span><span class="s">"race"</span><span class="p">,</span><span class="s">"age"</span><span class="p">,</span><span class="s">"fem"</span><span class="p">]</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">control_columns1</span><span class="p">],</span>
                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"race"</span><span class="p">],</span>
                    <span class="n">drop_first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Separate "Structural" control variables
# and generate dummies for both of them
</span><span class="n">control_columns2</span> <span class="o">=</span> <span class="p">[</span><span class="s">"empstat"</span><span class="p">,</span><span class="s">"citizen"</span><span class="p">]</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">control_columns2</span><span class="p">],</span>
                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"empstat"</span><span class="p">,</span><span class="s">"citizen"</span><span class="p">],</span>
                    <span class="n">drop_first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="estimate-log-linear-regressions">Estimate Log-Linear Regressions</h1>
<p>I perform 3 rounds of regressions:</p>
<ol>
  <li>The full sample of observations with at least a high school diploma or GED</li>
  <li>Observations from the last sample with non-zero income</li>
  <li>Observations with non-zero income, with separate regressions for each year</li>
</ol>

<h2 id="1-full-sample">1. Full Sample</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create 3 sets of variables
</span>
<span class="c1"># Education level only
</span><span class="n">X1</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="c1"># Education + Personal Controls
</span><span class="n">X2</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X1</span><span class="p">,</span> <span class="n">c1</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Education + Personal Controls + Structural Controls
</span><span class="n">X3</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">X2</span><span class="p">,</span> <span class="n">c2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Run 3 regressions
</span>
<span class="c1"># Education level only
</span><span class="n">ols1</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">X1</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># Education + Personal Controls
</span><span class="n">ols2</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">X2</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>

<span class="c1"># Education + Personal Controls + Structural Controls
</span><span class="n">ols3</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">X3</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Compare results in a Stargazer table
</span><span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">ols1</span><span class="p">,</span><span class="n">ols2</span><span class="p">,</span><span class="n">ols3</span><span class="p">]</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">Stargazer</span><span class="p">(</span><span class="n">models</span><span class="p">)</span>
<span class="n">table</span><span class="p">.</span><span class="n">covariate_order</span><span class="p">([</span><span class="s">"Associate's"</span><span class="p">,</span><span class="s">"Bachelor's"</span><span class="p">,</span><span class="s">"Advanced"</span><span class="p">])</span>
<span class="n">table</span><span class="p">.</span><span class="n">add_line</span><span class="p">(</span><span class="s">"Personal Controls"</span><span class="p">,</span> <span class="p">[</span><span class="s">"No"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">],</span> 
                <span class="n">LineLocation</span><span class="p">.</span><span class="n">FOOTER_TOP</span><span class="p">)</span>
<span class="n">table</span><span class="p">.</span><span class="n">add_line</span><span class="p">(</span><span class="s">"Structural Controls"</span><span class="p">,</span> <span class="p">[</span><span class="s">"No"</span><span class="p">,</span><span class="s">"No"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">],</span> 
               <span class="n">LineLocation</span><span class="p">.</span><span class="n">FOOTER_TOP</span><span class="p">)</span>
<span class="n">table</span><span class="p">.</span><span class="n">show_degrees_of_freedom</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</code></pre></div></div>

<table style="text-align:center"><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="3"><em>Dependent variable:Log Annual Wage</em></td></tr><tr><td style="text-align:left"></td><tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td><td>(3)</td></tr><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Associate's</td><td>1.066<sup>***</sup></td><td>1.187<sup>***</sup></td><td>0.389<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.008)</td><td>(0.007)</td><td>(0.005)</td></tr><tr><td style="text-align:left">Bachelor's</td><td>1.552<sup>***</sup></td><td>1.617<sup>***</sup></td><td>0.645<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.005)</td><td>(0.005)</td><td>(0.004)</td></tr><tr><td style="text-align:left">Advanced</td><td>2.143<sup>***</sup></td><td>2.309<sup>***</sup></td><td>1.022<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.007)</td><td>(0.007)</td><td>(0.005)</td></tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align: left">Personal Controls</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td style="text-align: left">Structural Controls</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td style="text-align: left">Observations</td><td>4,233,688</td><td>4,233,688</td><td>4,233,688</td></tr><tr><td style="text-align: left">R<sup>2</sup></td><td>0.034</td><td>0.058</td><td>0.557</td></tr><tr><td style="text-align: left">Adjusted R<sup>2</sup></td><td>0.034</td><td>0.058</td><td>0.557</td></tr><tr><td style="text-align: left">Residual Std. Error</td><td>4.403</td><td>4.349</td><td>2.981</td></tr><tr><td style="text-align: left">F Statistic</td><td>50270.329<sup>***</sup></td><td>19988.085<sup>***</sup></td><td>296166.338<sup>***</sup></td></tr><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align: left">Note:</td>
 <td colspan="3" style="text-align: right">
  <sup>*</sup>p&lt;0.1;
  <sup>**</sup>p&lt;0.05;
  <sup>***</sup>p&lt;0.01
 </td></tr></table>

<p>This regression estimates that on average, compared to those with a High School Diploma or GED:</p>
<ul>
  <li>Associate’s Degree holders earn 39% more</li>
  <li>Bachelor’s Degree holders earn 65% more</li>
  <li>Advanced Degree holders earn 100% more</li>
</ul>

<h2 id="2-with-income-greater-than-0">2. With Income greater than 0</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get indexes of observations with positive income
</span><span class="n">pos_income_ind</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"adj_incwage"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Subset variable collections using indexes
</span><span class="n">yb</span> <span class="o">=</span> <span class="n">y</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">pos_income_ind</span><span class="p">]</span>
<span class="n">X1b</span> <span class="o">=</span> <span class="n">X1</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">pos_income_ind</span><span class="p">]</span>
<span class="n">X2b</span> <span class="o">=</span> <span class="n">X2</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">pos_income_ind</span><span class="p">]</span>
<span class="n">X3b</span> <span class="o">=</span> <span class="n">X3</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">pos_income_ind</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Run same 3 regressions on subset of data
</span><span class="n">ols1b</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">yb</span><span class="p">,</span><span class="n">X1b</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
<span class="n">ols2b</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">yb</span><span class="p">,</span><span class="n">X2b</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
<span class="n">ols3b</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">yb</span><span class="p">,</span><span class="n">X3b</span><span class="p">).</span><span class="n">fit</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Compare results in a stargazer table
</span><span class="n">models_b</span> <span class="o">=</span> <span class="p">[</span><span class="n">ols1b</span><span class="p">,</span><span class="n">ols2b</span><span class="p">,</span><span class="n">ols3b</span><span class="p">]</span>

<span class="n">table_b</span> <span class="o">=</span> <span class="n">Stargazer</span><span class="p">(</span><span class="n">models_b</span><span class="p">)</span>
<span class="n">table_b</span><span class="p">.</span><span class="n">covariate_order</span><span class="p">([</span><span class="s">"Associate's"</span><span class="p">,</span><span class="s">"Bachelor's"</span><span class="p">,</span><span class="s">"Advanced"</span><span class="p">])</span>
<span class="n">table_b</span><span class="p">.</span><span class="n">add_line</span><span class="p">(</span><span class="s">"Personal Controls"</span><span class="p">,</span> <span class="p">[</span><span class="s">"No"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">],</span> 
                <span class="n">LineLocation</span><span class="p">.</span><span class="n">FOOTER_TOP</span><span class="p">)</span>
<span class="n">table_b</span><span class="p">.</span><span class="n">add_line</span><span class="p">(</span><span class="s">"Structural Controls"</span><span class="p">,</span> <span class="p">[</span><span class="s">"No"</span><span class="p">,</span><span class="s">"No"</span><span class="p">,</span><span class="s">"Yes"</span><span class="p">],</span> 
               <span class="n">LineLocation</span><span class="p">.</span><span class="n">FOOTER_TOP</span><span class="p">)</span>
<span class="n">table_b</span><span class="p">.</span><span class="n">show_degrees_of_freedom</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">table_b</span><span class="p">)</span>
</code></pre></div></div>

<table style="text-align:center"><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="3"><em>Dependent variable:Log Annual Wage</em></td></tr><tr><td style="text-align:left"></td><tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td><td>(3)</td></tr><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Associate's</td><td>0.383<sup>***</sup></td><td>0.356<sup>***</sup></td><td>0.299<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.002)</td><td>(0.002)</td><td>(0.002)</td></tr><tr><td style="text-align:left">Bachelor's</td><td>0.699<sup>***</sup></td><td>0.668<sup>***</sup></td><td>0.599<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.002)</td><td>(0.001)</td><td>(0.001)</td></tr><tr><td style="text-align:left">Advanced</td><td>1.084<sup>***</sup></td><td>0.953<sup>***</sup></td><td>0.881<sup>***</sup></td></tr><tr><td style="text-align:left"></td><td>(0.002)</td><td>(0.002)</td><td>(0.002)</td></tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align: left">Personal Controls</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td style="text-align: left">Structural Controls</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td style="text-align: left">Observations</td><td>3,262,888</td><td>3,262,888</td><td>3,262,888</td></tr><tr><td style="text-align: left">R<sup>2</sup></td><td>0.114</td><td>0.242</td><td>0.339</td></tr><tr><td style="text-align: left">Adjusted R<sup>2</sup></td><td>0.114</td><td>0.242</td><td>0.339</td></tr><tr><td style="text-align: left">Residual Std. Error</td><td>1.126</td><td>1.042</td><td>0.973</td></tr><tr><td style="text-align: left">F Statistic</td><td>140486.895<sup>***</sup></td><td>80066.304<sup>***</sup></td><td>92869.461<sup>***</sup></td></tr><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align: left">Note:</td>
 <td colspan="3" style="text-align: right">
  <sup>*</sup>p&lt;0.1;
  <sup>**</sup>p&lt;0.05;
  <sup>***</sup>p&lt;0.01
 </td></tr></table>

<p>Limiting the sample to only those with positive income reduces the impact of different degrees. For those with any income, compared to those with a High School Diploma or GED:</p>
<ul>
  <li>Associate’s Degree holders earn 28% more</li>
  <li>Bachelor’s Degree holders earn 58% more</li>
  <li>Advanced Degree holders earn 86% more</li>
</ul>

<h2 id="3-annual-models">3. Annual Models</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define function which, given a dataframe containing all
# regression variables, creates dummies where necessary,
# estimates regression, and returns coefficients for
# level of education.
</span><span class="k">def</span> <span class="nf">get_educ_coef</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"adj_incwage"</span><span class="p">])</span>

    <span class="n">educ</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">"educstr"</span><span class="p">]</span>
                         <span class="p">).</span><span class="n">drop</span><span class="p">(</span><span class="s">"HS Diploma/GED"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">controls</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s">"race"</span><span class="p">,</span><span class="s">"age"</span><span class="p">,</span><span class="s">"fem"</span><span class="p">,</span>
                                 <span class="s">"empstat"</span><span class="p">,</span><span class="s">"citizen"</span><span class="p">]],</span>
                              <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">"race"</span><span class="p">,</span><span class="s">"empstat"</span><span class="p">,</span>
                                       <span class="s">"citizen"</span><span class="p">],</span>
                              <span class="n">drop_first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    
    <span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">([</span><span class="n">educ</span><span class="p">,</span><span class="n">controls</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">ols</span> <span class="o">=</span> <span class="n">sm</span><span class="p">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">sm</span><span class="p">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X</span><span class="p">)).</span><span class="n">fit</span><span class="p">()</span>
    <span class="n">educ_params</span> <span class="o">=</span> <span class="n">ols</span><span class="p">.</span><span class="n">params</span><span class="p">[[</span><span class="s">"Advanced"</span><span class="p">,</span>
                              <span class="s">"Bachelor's"</span><span class="p">,</span>
                              <span class="s">"Associate's"</span><span class="p">]]</span>
    
    <span class="k">return</span><span class="p">(</span><span class="n">educ_params</span><span class="p">)</span>

<span class="c1"># Apply indices of positive income to full dataframe
</span><span class="n">pos_income_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">pos_income_ind</span><span class="p">]</span>

<span class="c1"># Create a vector of years (which will be iterated over)
</span><span class="n">years</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2020</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Initialize empty lists for education level coefs
</span><span class="n">adv_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">bac_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">asc_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Iterate over years, creating a new subset of data for 
# each year and estimating regression parameters
</span><span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">years</span><span class="p">):</span>
    <span class="n">subset_df</span> <span class="o">=</span> <span class="n">pos_income_df</span><span class="p">[</span><span class="n">pos_income_df</span><span class="p">[</span><span class="s">"year"</span><span class="p">]</span> <span class="o">==</span> <span class="n">year</span><span class="p">]</span>
    <span class="n">coef</span> <span class="o">=</span> <span class="n">get_educ_coef</span><span class="p">(</span><span class="n">subset_df</span><span class="p">)</span>
    <span class="n">adv_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">coef</span><span class="p">[</span><span class="s">"Advanced"</span><span class="p">])</span>
    <span class="n">bac_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">coef</span><span class="p">[</span><span class="s">"Bachelor's"</span><span class="p">])</span>
    <span class="n">asc_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">coef</span><span class="p">[</span><span class="s">"Associate's"</span><span class="p">])</span>
    
<span class="c1"># Assemble coefficients and years into a dataframe
# for plotting convenience
</span><span class="n">annual_coef_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">"Year"</span><span class="p">:</span> <span class="n">years</span><span class="p">,</span>
                          <span class="s">"Associate's"</span><span class="p">:</span><span class="n">asc_list</span><span class="p">,</span>
                          <span class="s">"Bachelor's"</span><span class="p">:</span><span class="n">bac_list</span><span class="p">,</span>
                          <span class="s">"Advanced"</span><span class="p">:</span><span class="n">adv_list</span><span class="p">})</span>
    
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  0%|          | 0/20 [00:00&lt;?, ?it/s]
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define function to plot coefficient differences over time
</span><span class="k">def</span> <span class="nf">plot_educ_coef</span><span class="p">(</span><span class="n">educ_level</span><span class="p">):</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">annual_coef_df</span><span class="p">[</span><span class="s">'Year'</span><span class="p">],</span> <span class="n">annual_coef_df</span><span class="p">[</span><span class="n">educ_level</span><span class="p">])</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">annual_coef_df</span><span class="p">[</span><span class="s">'Year'</span><span class="p">],</span> <span class="n">annual_coef_df</span><span class="p">[</span><span class="n">educ_level</span><span class="p">])</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s">"Coefficient of </span><span class="si">{</span><span class="n">educ_level</span><span class="si">}</span><span class="s"> Degree by Year"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Year'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Coefficient'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">annual_coef_df</span><span class="p">[</span><span class="s">'Year'</span><span class="p">][</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">recession</span><span class="p">(</span><span class="n">plt</span><span class="p">);</span>
</code></pre></div></div>

<p>Using the 3rd regression specification (Education, Personal &amp; Structural Controls), I repeat each regression on a different dataset, each subset by year. Plotted below are educational regression coefficients for each of these annual models.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot_educ_coef</span><span class="p">(</span><span class="s">"Associate's"</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_41_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot_educ_coef</span><span class="p">(</span><span class="s">"Bachelor's"</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_42_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot_educ_coef</span><span class="p">(</span><span class="s">"Advanced"</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/projects/assoc-degree/output_43_0.png" alt="png" /></p>

<p>Controlling for various personal and structural factors, from 2000, every kind of degree predicted higher wages compared to only a High School diploma, and this wage premium increased over time for every kind of secondary degree. However, after the GFC, wage premiums from an Associates degree began decreasing every year, while continuing to increase for other degrees.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Home</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Home</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ken-foster"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ken-foster</span></a></li><li><a href="https://www.linkedin.com/in/kennethbfoster"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">kennethbfoster</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A portfolio website for Kenneth Foster
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
